<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Docker & Kubernetes Quiz</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="quiz-container">
    <h1>Docker & Kubernetes Quiz</h1>
    <form method="post" action="/submit" id="quiz-form">
        {% for q in questions %}
            <div class="question-container" id="question{{ q.id }}">
                <p><strong>{{ loop.index }}. {{ q.question }}</strong></p>
                {% for opt in q.options %}
                    <label>
                        <input type="radio" name="q{{ q.id }}" value="{{ loop.index0 }}" required>
                        {{ opt }}
                    </label><br>
                {% endfor %}
            </div>
        {% endfor %}
        <div class="controls">
            <button type="button" id="prev-button" disabled>Previous</button>
            <button type="button" id="next-button">Next</button>
            <button type="submit" id="submit-button" class="hidden">Submit Quiz</button>
        </div>
    </form>
</div>

<script>
    const questionContainers = document.querySelectorAll('.question-container');
    const prevButton = document.getElementById('prev-button');
    const nextButton = document.getElementById('next-button');
    const submitButton = document.getElementById('submit-button');
    const totalQuestions = questionContainers.length;
    let currentQuestionIndex = 0;

    function showQuestion(index) {
        questionContainers.forEach((container, i) => {
            const radios = container.querySelectorAll('input[type="radio"]');
            if (i === index) {
                container.style.display = 'block';
                radios.forEach(r => r.setAttribute('required', 'required'));
            } else {
                container.style.display = 'none';
                radios.forEach(r => r.removeAttribute('required'));
            }
        });

        prevButton.disabled = index === 0;
        submitButton.classList.toggle('hidden', index !== totalQuestions - 1);
        nextButton.style.display = index === totalQuestions - 1 ? 'none' : 'inline-block';
    }

    function nextQuestion() {
        const currentRadios = questionContainers[currentQuestionIndex].querySelectorAll('input[type="radio"]');
        let answered = false;
        currentRadios.forEach(r => { if (r.checked) answered = true; });

        if (!answered) {
            alert("Please select an answer before proceeding.");
            return;
        }

        if (currentQuestionIndex < totalQuestions - 1) {
            currentQuestionIndex++;
            showQuestion(currentQuestionIndex);
        }
    }

    function prevQuestion() {
        if (currentQuestionIndex > 0) {
            currentQuestionIndex--;
            showQuestion(currentQuestionIndex);
        }
    }

    prevButton.addEventListener('click', prevQuestion);
    nextButton.addEventListener('click', nextQuestion);

    // Show first question initially
    showQuestion(currentQuestionIndex);
</script>

</body>
</html>